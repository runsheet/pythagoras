# Pythagoras AI Agent - Visual Architecture

## System Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PYTHAGORAS AI AGENT                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Configuration                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ System       â”‚  â”‚ Knowledge   â”‚  â”‚ MCP          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ Prompt       â”‚  â”‚ Bases       â”‚  â”‚ Servers      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚              â”‚  â”‚             â”‚  â”‚              â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ .md file     â”‚  â”‚ .md files   â”‚  â”‚ .yml files   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Tools Manager                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ Connects to MCP Servers                              â”‚   â”‚
â”‚  â”‚  â€¢ Discovers Available Tools                            â”‚   â”‚
â”‚  â”‚  â€¢ Provides listTools() API                             â”‚   â”‚
â”‚  â”‚  â€¢ Executes Tool Calls                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Memory Manager                        â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ Loads Issue Body                                     â”‚   â”‚
â”‚  â”‚  â€¢ Loads Comments as History                            â”‚   â”‚
â”‚  â”‚  â€¢ Distinguishes User/AI Messages                       â”‚   â”‚
â”‚  â”‚  â€¢ Posts New Comments                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                Plan & Execute Agent                     â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚            PLANNING PHASE                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  1. Analyze Objective                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  2. Review Context (prompt, KB, history)          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  3. Consider Available Tools                      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  4. Generate Execution Plan                       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                         â†“                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚           EXECUTION PHASE                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  For Each Step:                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    â€¢ Execute Action                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    â€¢ Update Memory (post comment)                 â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    â€¢ Handle Errors                                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    â€¢ Continue to Next Step                        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                         â†“                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚            SUMMARY PHASE                          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  1. Generate Execution Summary                    â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  2. Create File Patches                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  3. Prepare PR Description                        â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    PR Manager                           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ Create Unique Branch                                 â”‚   â”‚
â”‚  â”‚  â€¢ Apply File Patches                                   â”‚   â”‚
â”‚  â”‚  â€¢ Generate PR Description                              â”‚   â”‚
â”‚  â”‚  â€¢ Link to Issue                                        â”‚   â”‚
â”‚  â”‚  â€¢ Post Comment on Issue                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Pull Request         â”‚
                  â”‚   (Human Review)       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Issue â”‚
â”‚   + Label    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Action Trigger                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    src/index.ts (Main)                       â”‚
â”‚                                                              â”‚
â”‚  1. Get inputs (working_directory, model, issue_number)     â”‚
â”‚  2. Initialize all components                               â”‚
â”‚  3. Orchestrate workflow                                    â”‚
â”‚  4. Handle errors                                           â”‚
â”‚  5. Set outputs (pr_number, pr_url)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                      â”‚
       â–¼                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConfigLoader    â”‚                  â”‚ ToolsManager     â”‚
â”‚                 â”‚                  â”‚                  â”‚
â”‚ Load:           â”‚                  â”‚ â€¢ Connect to     â”‚
â”‚ â€¢ system-prompt â”‚                  â”‚   MCP servers    â”‚
â”‚ â€¢ knowledge-baseâ”‚                  â”‚ â€¢ List tools     â”‚
â”‚ â€¢ mcp-servers   â”‚                  â”‚ â€¢ Call tools     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ GitHubMemoryManager   â”‚
            â”‚                       â”‚
            â”‚ â€¢ Load issue          â”‚
            â”‚ â€¢ Load comments       â”‚
            â”‚ â€¢ Parse as messages   â”‚
            â”‚ â€¢ Post new comments   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PlanExecuteAgent      â”‚
            â”‚                       â”‚
            â”‚ â€¢ Create plan         â”‚
            â”‚ â€¢ Execute steps       â”‚
            â”‚ â€¢ Generate patches    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PRManager             â”‚
            â”‚                       â”‚
            â”‚ â€¢ Create branch       â”‚
            â”‚ â€¢ Apply patches       â”‚
            â”‚ â€¢ Create PR           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Pull Request Created  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## MCP Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MCP Servers                            â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   GitHub     â”‚  â”‚     AWS      â”‚  â”‚    Slack     â”‚   â”‚
â”‚  â”‚   Server     â”‚  â”‚    Server    â”‚  â”‚   Server     â”‚   â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚
â”‚  â”‚  Tools:      â”‚  â”‚  Tools:      â”‚  â”‚  Tools:      â”‚   â”‚
â”‚  â”‚  â€¢ issues    â”‚  â”‚  â€¢ ec2       â”‚  â”‚  â€¢ message   â”‚   â”‚
â”‚  â”‚  â€¢ prs       â”‚  â”‚  â€¢ s3        â”‚  â”‚  â€¢ channel   â”‚   â”‚
â”‚  â”‚  â€¢ repos     â”‚  â”‚  â€¢ lambda    â”‚  â”‚  â€¢ user      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                  â”‚                  â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   ToolsManager       â”‚
                  â”‚                      â”‚
                  â”‚   Map<serverName,    â”‚
                  â”‚        client>       â”‚
                  â”‚                      â”‚
                  â”‚   Map<serverName,    â”‚
                  â”‚        tools[]>      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  listTools() API     â”‚
                  â”‚                      â”‚
                  â”‚  Returns all tools   â”‚
                  â”‚  from all servers    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Memory System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GitHub Issue                          â”‚
â”‚                                                              â”‚
â”‚  Title: Build server out of disk space                      â”‚
â”‚  Body:  Our build agents keep running out...                â”‚
â”‚  Labels: [pythagoras]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Comment Thread                           â”‚
â”‚                                                              â”‚
â”‚  User: We need to diagnose and fix this                     â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: ğŸ¤– Pythagoras has started working on this issue       â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: ğŸ“‹ Execution Plan Created                             â”‚
â”‚      1. Check disk usage                                    â”‚
â”‚      2. Create cleanup script                               â”‚
â”‚      3. Add scheduled workflow                              â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: âœ… Step 1: Check disk usage                           â”‚
â”‚       Identified /tmp and build cache as issues             â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: âœ… Step 2: Create cleanup script                      â”‚
â”‚       Created scripts/cleanup-disk-space.sh                 â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: âœ… Step 3: Add scheduled workflow                     â”‚
â”‚       Created .github/workflows/cleanup.yml                 â”‚
â”‚  â†“                                                           â”‚
â”‚  Bot: ğŸ¤– Pythagoras has created a proposal                  â”‚
â”‚       Pull Request: #123                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ GitHubMemoryManager   â”‚
           â”‚                       â”‚
           â”‚ messages: [           â”‚
           â”‚   HumanMessage(...),  â”‚
           â”‚   AIMessage(...),     â”‚
           â”‚   HumanMessage(...),  â”‚
           â”‚   AIMessage(...)      â”‚
           â”‚ ]                     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
pythagoras/
â”‚
â”œâ”€â”€ src/                              # Source code
â”‚   â”œâ”€â”€ index.ts                      # Main entry point
â”‚   â”œâ”€â”€ exports.ts                    # Public API
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                       # Configuration
â”‚   â”‚   â”œâ”€â”€ types.ts                  # Type definitions
â”‚   â”‚   â””â”€â”€ config-loader.ts          # Loader implementation
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                        # Tool management
â”‚   â”‚   â””â”€â”€ tools-manager.ts          # MCP integration
â”‚   â”‚
â”‚   â”œâ”€â”€ memory/                       # Memory management
â”‚   â”‚   â””â”€â”€ github-memory.ts          # GitHub integration
â”‚   â”‚
â”‚   â”œâ”€â”€ agent/                        # Agent logic
â”‚   â”‚   â””â”€â”€ plan-execute-agent.ts     # LangChain agent
â”‚   â”‚
â”‚   â””â”€â”€ pr/                           # PR management
â”‚       â””â”€â”€ pr-manager.ts             # PR creation
â”‚
â”œâ”€â”€ example/                          # Example configuration
â”‚   â”œâ”€â”€ system-prompt.md              # Agent prompt
â”‚   â”œâ”€â”€ knowledge-base/               # Domain knowledge
â”‚   â”‚   â””â”€â”€ disk_space.md
â”‚   â””â”€â”€ mcp-servers/                  # Tool configs
â”‚       â””â”€â”€ test.yml
â”‚
â”œâ”€â”€ docs/                             # Documentation
â”‚   â”œâ”€â”€ ARCHITECTURE.md               # System design
â”‚   â””â”€â”€ QUICKSTART.md                 # Setup guide
â”‚
â”œâ”€â”€ dist/                             # Built output
â”‚   â””â”€â”€ index.js                      # Bundled action
â”‚
â”œâ”€â”€ .github/workflows/                # Workflows
â”‚   â””â”€â”€ pythagoras.yml                # Main workflow
â”‚
â”œâ”€â”€ action.yml                        # Action definition
â”œâ”€â”€ package.json                      # Dependencies
â”œâ”€â”€ rollup.config.ts                  # Build config
â””â”€â”€ tsconfig.json                     # TypeScript config
```

## Execution Timeline

```
Time: 0s
â”‚
â”œâ”€ Load Configuration (1-2s)
â”‚  â””â”€ Read system-prompt.md
â”‚  â””â”€ Read knowledge-base/*.md
â”‚  â””â”€ Read mcp-servers/*.yml
â”‚
â”œâ”€ Initialize Tools (2-5s)
â”‚  â””â”€ Connect to MCP server 1
â”‚  â””â”€ Connect to MCP server 2
â”‚  â””â”€ List all tools
â”‚
â”œâ”€ Load Memory (1-2s)
â”‚  â””â”€ Fetch issue
â”‚  â””â”€ Fetch comments
â”‚  â””â”€ Parse as messages
â”‚
â”œâ”€ Planning Phase (5-15s)
â”‚  â””â”€ Analyze objective
â”‚  â””â”€ Review context
â”‚  â””â”€ Generate plan
â”‚  â””â”€ Post plan to issue
â”‚
â”œâ”€ Execution Phase (10-60s)
â”‚  â””â”€ Execute step 1
â”‚  â”‚  â””â”€ Run LLM inference
â”‚  â”‚  â””â”€ Post result to issue
â”‚  â””â”€ Execute step 2
â”‚  â”‚  â””â”€ Run LLM inference
â”‚  â”‚  â””â”€ Post result to issue
â”‚  â””â”€ Execute step N
â”‚     â””â”€ Run LLM inference
â”‚     â””â”€ Post result to issue
â”‚
â”œâ”€ Summary Phase (5-10s)
â”‚  â””â”€ Generate summary
â”‚  â””â”€ Create file patches
â”‚
â”œâ”€ PR Phase (2-5s)
â”‚  â””â”€ Create branch
â”‚  â””â”€ Apply patches
â”‚  â””â”€ Create PR
â”‚  â””â”€ Link to issue
â”‚
â””â”€ Complete
   Total: 25-100s depending on complexity
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Technology Stack                        â”‚
â”‚                                                             â”‚
â”‚  Frontend: N/A (GitHub Actions only)                       â”‚
â”‚                                                             â”‚
â”‚  Backend:                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TypeScript      - Type-safe implementation           â”‚ â”‚
â”‚  â”‚ Node.js 24+     - Runtime environment                â”‚ â”‚
â”‚  â”‚ LangChain       - Agent framework                    â”‚ â”‚
â”‚  â”‚ OpenAI API      - LLM inference                      â”‚ â”‚
â”‚  â”‚ MCP SDK         - Tool protocol                      â”‚ â”‚
â”‚  â”‚ GitHub API      - Issues, PRs, comments              â”‚ â”‚
â”‚  â”‚ Rollup          - Build system                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  Infrastructure:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GitHub Actions  - CI/CD platform                     â”‚ â”‚
â”‚  â”‚ GitHub Secrets  - Credential storage                 â”‚ â”‚
â”‚  â”‚ GitHub Issues   - Memory/conversation                â”‚ â”‚
â”‚  â”‚ GitHub PRs      - Change proposals                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

This visual architecture document provides a comprehensive view of how all components work together in the Pythagoras AI Agent system.
